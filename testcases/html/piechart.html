<!doctype html>
<html>

<head>
	<title>PIE Chart</title>
	<meta charset="utf-8">
	<script src="assets/chart.js"></script>
	<link rel="stylesheet" type="text/css" href="assets/style.css" />
</head>

<body>

	<div id="container" class="center">
		<div id="content" class="chard-card">
			
		</div>
	</div>

	<script>
		function settigsall() {
			return {
				type: 'pie',
				data: {
					labels: [
						'Eiweis',
						'Fett',
						'Kohlenhydrate'
					],
					datasets: [{
						unit: 'kal',
						mode: 'current',
						label: 'Makro Nährstoffe',
						backgroundColor: [
							'rgba(115,210,22,0.85)',
							'rgba(245,121,0,0.85)',
							'rgba(52,101,164,0.85)'
						],
						borderWidth: 0,
						showLine: false,
						data: [
							'887.0',
							'380.0',
							'1268.0'
						]
					}]
				},
				options: {
					backgroundColor: 'rgba(0,0,0,0.1)',
					borderColor: 'rgba(0,0,0,0.1)',
					color: '#e1e1e1',
					elements: {
						arc: {
							borderAlign: 'center',
							borderColor: '#fff',
							borderWidth: 0,
							offset: 0,
							backgroundColor: 'rgba(0,0,0,0.1)'
						},
						line: {
							borderCapStyle: 'butt',
							borderDash: [],
							borderDashOffset: 0,
							borderJoinStyle: 'miter',
							borderWidth: 3,
							capBezierPoints: true,
							fill: false,
							tension: 0,
							backgroundColor: 'rgba(0,0,0,0.1)',
							borderColor: 'rgba(0,0,0,0.1)'
						},
						point: {
							borderWidth: 0,
							hitRadius: 8,
							hoverBorderWidth: 1,
							hoverRadius: 8,
							pointStyle: 'circle',
							radius: 0.33,
							backgroundColor: 'rgba(0,0,0,0.1)',
							borderColor: 'rgba(0,0,0,0.1)',
							pointRadius: 8
						},
						bar: {
							borderSkipped: 'start',
							borderWidth: 0,
							borderRadius: 0,
							backgroundColor: 'rgba(0,0,0,0.1)',
							borderColor: 'rgba(0,0,0,0.1)'
						}
					},
					events: [
						'mousemove',
						'mouseout',
						'click',
						'touchstart',
						'touchmove'
					],
					font: {
						family: '"Roboto", "Noto", sans-serif',
						size: 12,
						style: 'normal',
						lineHeight: 1.2,
						weight: null
					},
					hover: {
						mode: 'nearest',
						intersect: true,
						onHover: null
					},
					interaction: {
						mode: 'nearest',
						intersect: true
					},
					maintainAspectRatio: false,
					onHover: null,
					onClick: null,
					onResize: null,
					plugins: {
						filler: {
							propagate: true
						},
						legend: {
							display: true,
							position: 'bottom',
							align: 'center',
							fullWidth: true,
							reverse: false,
							weight: 1000,
							onHover: null,
							onLeave: null,
							labels: {
								boxWidth: 8,
								padding: 10,
								color: '#e1e1e1',
								usePointStyle: true
							},
							title: {
								display: true,
								padding: 10,
								position: 'center',
								color: '#ff9500',
								font: {
									style: 'bold'
								},
								text: 'all Makronährstoffe'
							},
							lineWidth: 0
						},
						title: {
							align: 'center',
							display: true,
							font: {
								style: 'bold'
							},
							fullWidth: true,
							padding: 10,
							position: 'top',
							text: 'Aufteilung Nährstoffe (kal) pro Tag',
							weight: 2000,
							color: '#ff9500'
						},
						tooltip: {
							mode: 'nearest',
							intersect: true,
							enabled: true,
							custom: null,
							position: 'average',
							backgroundColor: '#ecf0f1',
							titleColor: '#647687',
							titleFont: {
								style: 'bold'
							},
							titleSpacing: 2,
							titleMarginBottom: 6,
							titleAlign: 'left',
							bodyColor: '#647687',
							bodySpacing: 2,
							bodyFont: {},
							bodyAlign: 'left',
							footerColor: '#647687',
							footerSpacing: 2,
							footerMarginTop: 6,
							footerFont: {
								style: 'bold'
							},
							footerAlign: 'left',
							yPadding: 6,
							xPadding: 6,
							caretPadding: 2,
							caretSize: 5,
							cornerRadius: 6,
							multiKeyBackground: '#fff',
							displayColors: true,
							borderColor: 'rgba(0,0,0,0)',
							borderWidth: 0,
							animation: {
								duration: 400,
								easing: 'easeOutQuart',
								numbers: {
									type: 'number',
									properties: [
										'x',
										'y',
										'width',
										'height',
										'caretX',
										'caretY'
									]
								},
								opacity: {
									easing: 'linear',
									duration: 200
								}
							},
							callbacks: {}
						},
						chardbackground: {},
						gradient: {}
					},
					responsive: true,
					showLine: true,
					layout: {
						padding: {
							top: 0,
							right: 24,
							bottom: 24,
							left: 24
						}
					},
					animation: {
						numbers: {
							type: 'number',
							properties: [
								'circumference',
								'endAngle',
								'innerRadius',
								'outerRadius',
								'startAngle',
								'x',
								'y',
								'offset',
								'borderWidth'
							]
						},
						animateRotate: true,
						animateScale: false
					},
					locale: 'de-DE',
					datasetElementType: false,
					dataElementType: 'arc',
					dataElementOptions: [
						'backgroundColor',
						'borderColor',
						'borderWidth',
						'borderAlign',
						'offset'
					],
					aspectRatio: 1,
					cutoutPercentage: 0,
					rotation: 0,
					circumference: 360,
					type: 'pie',
					units: '',
					chartArea: {
						backgroundColor: 'transparent'
					},
					spanGaps: true,
					scales: {}
				}
			}
		}

		function getData() {
			var data = {
				labels: [
					'Eiweis',
					'Fett',
					'Kohlenhydrate'
				],
				datasets: [{
					unit: 'kal',
					mode: 'current',
					label: 'Makro Nährstoffe',
					backgroundColor: [
						'rgba(115,210,22,0.85)',
						'rgba(245,121,0,0.85)',
						'rgba(52,101,164,0.85)'
					],
					borderWidth: 0,
					showLine: false,
					data: [
						'887.0',
						'380.0',
						'1268.0'
					]
				}]
			};

			return data;
		};

		function getOptions() {
			var options = {
				type: 'pie',
				units: 'kal',
				layout: {
					padding: {
						left: 24,
						right: 24,
						top: 0,
						bottom: 24
					}
				},
				chartArea: {
					backgroundColor: 'transparent'
				},
				elements: {
					point: {
						radius: 0.33,
						hitRadius: 8
					}
				},
				spanGaps: true,
				plugins: {
					title: {
						align: 'center',
						display: true,
						font: {
							style: 'bold'
						},
						fullWidth: true,
						padding: 10,
						position: 'top',
						text: 'Aufteilung Nährstoffe (kal) pro Tag',
						weight: 2000,
						color: '#ff9500'
					},
					tooltip: {},
					legend: {
						display: true,
						position: 'bottom',
						lineWidth: 0,
						labels: {
							usePointStyle: true,
							boxWidth: 8
						}
					},
					scales: {},
				},
				animation: {}
			}
			return options;
		}

		function setChartDefaults() {

			Chart.defaults.responsive = true;
			Chart.defaults.maintainAspectRatio = false;
			Chart.defaults.animation = false;
			Chart.defaults.locale = "at-DE";

			Chart.defaults.font.family = "Quicksand, Roboto,'Open Sans','Rubik','Helvetica Neue', 'Helvetica', 'Arial', sans-serif";
			Chart.defaults.color = "#999999"
			Chart.defaults.plugins.legend.labels.color = Chart.defaults.color;

			Chart.defaults.plugins.legend.position = "bottom";
			Chart.defaults.plugins.legend.labels.usePointStyle = true;
			Chart.defaults.plugins.legend.labels.boxWidth = 8;

			// Tooltips new beta 7 !
			Chart.defaults.plugins.tooltip.enabled = true;
			Chart.defaults.plugins.tooltip.backgroundColor = '#ecf0f1';
			Chart.defaults.plugins.tooltip.titleColor = '#2c3e50';
			Chart.defaults.plugins.tooltip.bodyColor = '#2c3e50';
			Chart.defaults.plugins.tooltip.footerColor = '#2c3e50';

			// element settings
			if (Chart.defaults.elements && Chart.defaults.elements.arc)
				Chart.defaults.elements.arc.borderWidth = 0;
			if (Chart.defaults.elements && Chart.defaults.elements.line) {
				Chart.defaults.elements.line.fill = false;
				Chart.defaults.elements.line.tension = 0;
			}
			if (Chart.defaults.elements && Chart.defaults.elements.point) {
				Chart.defaults.elements.point.radius = 0;
				Chart.defaults.elements.point.borderWidth = 0;
				Chart.defaults.elements.point.hoverRadius = 8;
			}


		}

		function loadChart() {
			const content = document.getElementById('content')
			const canvas = document.createElement("canvas");
			const ctx = canvas.getContext("2d");
			canvas.id = "canvas";
			canvas.setAttribute("class", "chartjs");
			canvas.height = "100%";
			canvas.style.cssText = "-moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;";
			content.appendChild(canvas);

			if (window.myBubble)
				window.myBubble.destroy();
			setChartDefaults();
			const settings = getOptions();
			settings.data = getData();
			const _settings = settigsall()
			window.myBubble = new Chart(ctx, _settings);
		}

		window.onload = function () {
			// window.setInterval(loadChart, 5000);
			loadChart();
		};
	</script>
</body>

</html>